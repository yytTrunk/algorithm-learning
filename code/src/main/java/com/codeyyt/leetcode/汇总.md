

# 动态规划类型



## 动态规划题目求解形式

#### 动态规划有两种求解形式

自顶向下：也就是记忆化递归，求解过程会遇到重复子问题，所以需要记录每一个子问题的结果；
自底向上：通过发现一个问题最开始的样子，通过「递推」一步一步求得原始问题的解。

绝大多数问题都可以通过「自底向上」递推的方式去做。



## 动态规划问题分析思路

1. 定义子问题（发现重叠子问题，分解成规模较小的两个子问题，且子问题的解可以复用）
2. 明确dp[i]或者dp\[i][j]表示含义
3. 确定 dp数组的计算顺序（推出状态转移方程，可通过填表）
4. 确定初始状态
5. 空间优化（可选）





## 使用辅助dp数组解题

[Q198 打家劫舍](https://leetcode-cn.com/problems/house-robber/)

[Q279 完全平方数](https://leetcode-cn.com/problems/perfect-squares/)

[Q300 最长递增子序列](https://leetcode-cn.com/problems/longest-increasing-subsequence/)

### 解法归纳

1. 几乎所有的动态规划解决方案，首先会创建一个一维或多维数组 DP 来保存中间子解的值，以及通常数组最后一个值代表最终解。





# 动态规划问题分类

- 子序列问题
- 背包问题
  - 0-1背包
  - 完全背包
  - 子集背包
- 贪心类型
- 其它类型

## 子序列问题





## 背包问题

### 0-1背包问题（二维DP数组）

#### 问题描述

给定一组N个物品，每种物品都有自己的重量wi和价值vi，给定的背包最大重量为V内，选择其中若干个（也即每种物品可以选0个或1个），设计选择方案使得物品的总价值最高。

举例：4个物品，对应重量价值如下，需要放在一个背包最大重量为20的背包里，求出可能的最大价值

| 编号 | 价值wi | 重量vi |
| ---- | ------ | ------ |
| 1    | 1      | 1      |
| 2    | 4      | 3      |
| 3    | 5      | 4      |
| 4    | 7      | 5      |

#### 分析

定义函数F(i, v)表示将前i件商品依次做出选择后，放到体积为v的背包里能够获得的最大价值

即F(4, 7)表示将4个物品，放到背包最大重量为7的背包里，最大价值

那么，考虑第i个物品时，无外乎两种可能：选择放入背包，或者不选择放入背包。

- 不放的话，背包的容量v不影响，那么F(i, v)的最大价值就是剩余i-1个背包的最大价值 F(i-1, v)
- 选的话，背包的容量变小v-vi，那么F(i, v)的最大价值就是剩余i-1个背包，同时可以放的容量也会减少为v - vi的最大价值 F(i-1, v - vi) 

那么，需要判断是放还是不放后，即求两个相对大的值

F(i, v)  = max{ F(i-1, v),  F(i-1, v - vi) + wi ) }

通过填表，

横向，当背包最大重量依次为0-7时，最大价值

单元格表示最大价值

| 商品序号i | 重量vi | 价值wi | 0    | 1    | 2    | 3    | 4    | 5    | 6    | 7    |
| --------- | ------ | ------ | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 1         | 1      | 1      | 0    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| 2         | 3      | 4      | 0    | 1    | 1    | 4    | 5    | 5    | 5    | 5    |
| 3         | 4      | 5      | 0    | 1    | 1    | 4    | 5    | 6    | 6    | 9    |
| 4         | 5      | 7      | 0    | 1    | 1    | 4    | 5    | 7    | 8    | 9    |

- 当背包最大重量为0时，不能放入任何商品，所以单元格对应最大价值都为0

- 当只有1号商品时，背包重量为0-7时，最大价值只能为1

- 当有{1,2}号商品时，背包重量为1,2时，重量超了，不能放，最大价值为1。

  - 当最大重量为3时，max{2号物品不放，放}，当不放时，就只考虑前1号商品的最大价值为1，放时，重量满足条件，此时价值为4，那么取{1, 4}，取最大为4填入

  - 当最大重量为4时，max{2号物品不放，放}，当不放时，就只考虑前1号商品的最大价值为1，放时，重量满足条件，此时需要4减去物品2重量3，还有1，还能放最大重量为1时的最大价值，去前面查的为1时，最大价值为1，那么取{1, 4 + 1}，取最大为5填入

- 当有{1,2,3}号商品时
  - 当最大重量为7时，max{3号物品不放，放}，当不放时，就只考虑前2号商品的最大价值为5，放时，重量满足条件，此时需要7减去物品3重量4，还有3，还能放最大重量为3时的最大价值，去前面查的为3时，最大价值为4，那么取{5, 5+4}，取最大为9填入

为二维数组问题

#### 代码

```java
public int solution(int N, int W, int[] weights, int[] values){
    int[][] dp = new int[N+1][W+1];
    for (int i = 1; i <= N; i++) {
        int w = weights[i-1];
        int v = values[i-1];
        for (int j = 1; j <= W; j++) {
            if (w > j) {
                dp[i][j] = dp[i-1][j];
                continue;
            }
            dp[i][j] = Math.max(dp[i-1][j], dp[i-1][j-w] + v);
        }
    }
    return dp[N][W];
}
```



#### 典型例题

[Q416 分割等和子集](https://leetcode-cn.com/problems/partition-equal-subset-sum/)



### 背包问题题目汇总

https://www.luogu.com.cn/problem/list



#### 参考

[0/1背包讲解](https://www.bilibili.com/video/BV1XD4y1S7nv/?spm_id_from=333.788.recommend_more_video.0)

[0/1背包讲解](https://www.bilibili.com/video/BV14V411Z7QN?from=search&seid=17355125979633849465)

[0/1背包讲解](https://leetcode-cn.com/problems/partition-equal-subset-sum/solution/bang-ni-ba-0-1bei-bao-xue-ge-tong-tou-by-px33/)

